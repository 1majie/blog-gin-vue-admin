/**
 * name: vite-plugin-banner
 * version: v0.7.1
 * author: chengpeiquan <chengpeiquan@chengpeiquan.com>
 * repo: https://github.com/chengpeiquan/vite-plugin-banner
 */
"use strict";var t=require("fs"),e=require("path");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=n(t);let r;const i=new RegExp(/\.(css|[mc]?js)$/i),c=new RegExp(/vendor/);module.exports=function(t){const n=function(t){const e={content:"",outDir:"dist",debug:!1,verify:!0},n=Object.prototype.toString.call(t);if(!["[object String]","[object Object]","[object Function]"].includes(n))throw new Error("[vite-plugin-banner] The options must be a string, an object or a function.");if("string"==typeof t&&(e.content=t),"function"==typeof t)return e.content=t,e;if("object"==typeof t){if(!Object.prototype.hasOwnProperty.call(t,"content"))throw new Error('[vite-plugin-banner] Missing "content" option.');e.content=t.content,Object.prototype.hasOwnProperty.call(t,"outDir")&&"string"==typeof t.outDir&&(e.outDir=t.outDir),e.debug=Boolean(t.debug),"boolean"==typeof t.verify&&(e.verify=t.verify)}if(!e.verify)return e;if("function"==typeof e.content)return e;const o="string"!=typeof(r=e.content)?"The banner content must be a string.":r?r.includes("/*")&&!r.includes("*/")||!r.includes("/*")&&r.includes("*/")?"If you want to pass in comment symbols, you must pass them in pairs.":"":"The banner content can not be empty.";var r;if(o)throw new Error(`[vite-plugin-banner] ${o}`);return e}(t);return{name:"banner",configResolved(t){r=t},async writeBundle(t,s){for(const t of Object.entries(s)){const s=r.root,u=n.outDir||r.build.outDir||"dist",f=t[0].endsWith(".js-lean")?t[0].replace(/\.js-lean/,".lean.js"):t[0],a=e.resolve(s,u,f),{content:l}=n;if(i.test(f)&&!c.test(f))try{let t=o.default.readFileSync(a,{encoding:"utf8"}),e="string"==typeof l?l:"";"function"==typeof l&&(e=l(f)),e&&(t=e.includes("/*")||e.includes("*/")||!n.verify?`${e}\n${t}`:`/*! ${e} */\n${t}`),o.default.writeFileSync(a,t)}catch(t){n.debug&&console.log(t)}}}}};
